     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_io_out8
     7 00000000                                 	EXTERN	_io_in8
     8 00000000                                 	EXTERN	_fifo32_put
     9 00000000                                 [FILE "keyboard.c"]
    10 00000000                                 	GLOBAL	_keytable0
    11                                          [SECTION .data]
    12 00000000                                 _keytable0:
    13 00000000 00                              	DB	0
    14 00000001 00                              	DB	0
    15 00000002 31                              	DB	49
    16 00000003 32                              	DB	50
    17 00000004 33                              	DB	51
    18 00000005 34                              	DB	52
    19 00000006 35                              	DB	53
    20 00000007 36                              	DB	54
    21 00000008 37                              	DB	55
    22 00000009 38                              	DB	56
    23 0000000A 39                              	DB	57
    24 0000000B 30                              	DB	48
    25 0000000C 2D                              	DB	45
    26 0000000D 5E                              	DB	94
    27 0000000E 00                              	DB	0
    28 0000000F 00                              	DB	0
    29 00000010 71                              	DB	113
    30 00000011 77                              	DB	119
    31 00000012 65                              	DB	101
    32 00000013 72                              	DB	114
    33 00000014 74                              	DB	116
    34 00000015 79                              	DB	121
    35 00000016 75                              	DB	117
    36 00000017 69                              	DB	105
    37 00000018 6F                              	DB	111
    38 00000019 70                              	DB	112
    39 0000001A 40                              	DB	64
    40 0000001B 5B                              	DB	91
    41 0000001C 00                              	DB	0
    42 0000001D 00                              	DB	0
    43 0000001E 61                              	DB	97
    44 0000001F 73                              	DB	115
    45 00000020 64                              	DB	100
    46 00000021 66                              	DB	102
    47 00000022 67                              	DB	103
    48 00000023 68                              	DB	104
    49 00000024 6A                              	DB	106
    50 00000025 6B                              	DB	107
    51 00000026 6C                              	DB	108
    52 00000027 3B                              	DB	59
    53 00000028 3A                              	DB	58
    54 00000029 00                              	DB	0
    55 0000002A 00                              	DB	0
    56 0000002B 5D                              	DB	93
    57 0000002C 7A                              	DB	122
    58 0000002D 78                              	DB	120
    59 0000002E 63                              	DB	99
    60 0000002F 76                              	DB	118
    61 00000030 62                              	DB	98
    62 00000031 6E                              	DB	110
    63 00000032 6D                              	DB	109
    64 00000033 2C                              	DB	44
    65 00000034 2E                              	DB	46
    66 00000035 2F                              	DB	47
    67 00000036 00                              	DB	0
    68 00000037 2A                              	DB	42
    69 00000038 00                              	DB	0
    70 00000039 20                              	DB	32
    71 0000003A 00                              	DB	0
    72 0000003B 00                              	DB	0
    73 0000003C 00                              	DB	0
    74 0000003D 00                              	DB	0
    75 0000003E 00                              	DB	0
    76 0000003F 00                              	DB	0
    77 00000040 00                              	DB	0
    78 00000041 00                              	DB	0
    79 00000042 00                              	DB	0
    80 00000043 00                              	DB	0
    81 00000044 00                              	DB	0
    82 00000045 00                              	DB	0
    83 00000046 00                              	DB	0
    84 00000047 37                              	DB	55
    85 00000048 38                              	DB	56
    86 00000049 39                              	DB	57
    87 0000004A 2D                              	DB	45
    88 0000004B 34                              	DB	52
    89 0000004C 35                              	DB	53
    90 0000004D 36                              	DB	54
    91 0000004E 2B                              	DB	43
    92 0000004F 31                              	DB	49
    93 00000050 32                              	DB	50
    94 00000051 33                              	DB	51
    95 00000052 30                              	DB	48
    96 00000053 2E                              	DB	46
    97 00000054 00                              	DB	0
    98 00000055 00                              	DB	0
    99 00000056 00                              	DB	0
   100 00000057 00                              	DB	0
   101 00000058 00                              	DB	0
   102 00000059 00                              	DB	0
   103 0000005A 00                              	DB	0
   104 0000005B 00                              	DB	0
   105 0000005C 00                              	DB	0
   106 0000005D 00                              	DB	0
   107 0000005E 00                              	DB	0
   108 0000005F 00                              	DB	0
   109 00000060 00                              	DB	0
   110 00000061 00                              	DB	0
   111 00000062 00                              	DB	0
   112 00000063 00                              	DB	0
   113 00000064 00                              	DB	0
   114 00000065 00                              	DB	0
   115 00000066 00                              	DB	0
   116 00000067 00                              	DB	0
   117 00000068 00                              	DB	0
   118 00000069 00                              	DB	0
   119 0000006A 00                              	DB	0
   120 0000006B 00                              	DB	0
   121 0000006C 00                              	DB	0
   122 0000006D 00                              	DB	0
   123 0000006E 00                              	DB	0
   124 0000006F 00                              	DB	0
   125 00000070 00                              	DB	0
   126 00000071 00                              	DB	0
   127 00000072 00                              	DB	0
   128 00000073 00                              	DB	0
   129 00000074 00                              	DB	0
   130 00000075 00                              	DB	0
   131 00000076 00                              	DB	0
   132 00000077 00                              	DB	0
   133 00000078 00                              	DB	0
   134 00000079 00                              	DB	0
   135 0000007A 00                              	DB	0
   136 0000007B 00                              	DB	0
   137 0000007C 00                              	DB	0
   138 0000007D 00                              	DB	0
   139 0000007E 00                              	DB	0
   140 0000007F 00                              	DB	0
   141 00000080                                 	GLOBAL	_keytable1
   142 00000080                                 _keytable1:
   143 00000080 00                              	DB	0
   144 00000081 00                              	DB	0
   145 00000082 21                              	DB	33
   146 00000083 40                              	DB	64
   147 00000084 23                              	DB	35
   148 00000085 24                              	DB	36
   149 00000086 25                              	DB	37
   150 00000087 5E                              	DB	94
   151 00000088 26                              	DB	38
   152 00000089 2A                              	DB	42
   153 0000008A 28                              	DB	40
   154 0000008B 29                              	DB	41
   155 0000008C 5F                              	DB	95
   156 0000008D 2B                              	DB	43
   157 0000008E 00                              	DB	0
   158 0000008F 00                              	DB	0
   159 00000090 51                              	DB	81
   160 00000091 57                              	DB	87
   161 00000092 45                              	DB	69
   162 00000093 52                              	DB	82
   163 00000094 54                              	DB	84
   164 00000095 59                              	DB	89
   165 00000096 55                              	DB	85
   166 00000097 49                              	DB	73
   167 00000098 4F                              	DB	79
   168 00000099 50                              	DB	80
   169 0000009A 60                              	DB	96
   170 0000009B 7B                              	DB	123
   171 0000009C 00                              	DB	0
   172 0000009D 00                              	DB	0
   173 0000009E 41                              	DB	65
   174 0000009F 53                              	DB	83
   175 000000A0 44                              	DB	68
   176 000000A1 46                              	DB	70
   177 000000A2 47                              	DB	71
   178 000000A3 48                              	DB	72
   179 000000A4 4A                              	DB	74
   180 000000A5 4B                              	DB	75
   181 000000A6 4C                              	DB	76
   182 000000A7 2B                              	DB	43
   183 000000A8 2A                              	DB	42
   184 000000A9 00                              	DB	0
   185 000000AA 00                              	DB	0
   186 000000AB 7D                              	DB	125
   187 000000AC 5A                              	DB	90
   188 000000AD 58                              	DB	88
   189 000000AE 43                              	DB	67
   190 000000AF 56                              	DB	86
   191 000000B0 42                              	DB	66
   192 000000B1 4E                              	DB	78
   193 000000B2 4D                              	DB	77
   194 000000B3 3C                              	DB	60
   195 000000B4 3E                              	DB	62
   196 000000B5 3F                              	DB	63
   197 000000B6 00                              	DB	0
   198 000000B7 2A                              	DB	42
   199 000000B8 00                              	DB	0
   200 000000B9 20                              	DB	32
   201 000000BA 00                              	DB	0
   202 000000BB 00                              	DB	0
   203 000000BC 00                              	DB	0
   204 000000BD 00                              	DB	0
   205 000000BE 00                              	DB	0
   206 000000BF 00                              	DB	0
   207 000000C0 00                              	DB	0
   208 000000C1 00                              	DB	0
   209 000000C2 00                              	DB	0
   210 000000C3 00                              	DB	0
   211 000000C4 00                              	DB	0
   212 000000C5 00                              	DB	0
   213 000000C6 00                              	DB	0
   214 000000C7 37                              	DB	55
   215 000000C8 38                              	DB	56
   216 000000C9 39                              	DB	57
   217 000000CA 2D                              	DB	45
   218 000000CB 34                              	DB	52
   219 000000CC 35                              	DB	53
   220 000000CD 36                              	DB	54
   221 000000CE 2B                              	DB	43
   222 000000CF 31                              	DB	49
   223 000000D0 32                              	DB	50
   224 000000D1 33                              	DB	51
   225 000000D2 30                              	DB	48
   226 000000D3 2E                              	DB	46
   227 000000D4 00                              	DB	0
   228 000000D5 00                              	DB	0
   229 000000D6 00                              	DB	0
   230 000000D7 00                              	DB	0
   231 000000D8 00                              	DB	0
   232 000000D9 00                              	DB	0
   233 000000DA 00                              	DB	0
   234 000000DB 00                              	DB	0
   235 000000DC 00                              	DB	0
   236 000000DD 00                              	DB	0
   237 000000DE 00                              	DB	0
   238 000000DF 00                              	DB	0
   239 000000E0 00                              	DB	0
   240 000000E1 00                              	DB	0
   241 000000E2 00                              	DB	0
   242 000000E3 00                              	DB	0
   243 000000E4 00                              	DB	0
   244 000000E5 00                              	DB	0
   245 000000E6 00                              	DB	0
   246 000000E7 00                              	DB	0
   247 000000E8 00                              	DB	0
   248 000000E9 00                              	DB	0
   249 000000EA 00                              	DB	0
   250 000000EB 00                              	DB	0
   251 000000EC 00                              	DB	0
   252 000000ED 00                              	DB	0
   253 000000EE 00                              	DB	0
   254 000000EF 00                              	DB	0
   255 000000F0 00                              	DB	0
   256 000000F1 00                              	DB	0
   257 000000F2 00                              	DB	0
   258 000000F3 00                              	DB	0
   259 000000F4 00                              	DB	0
   260 000000F5 00                              	DB	0
   261 000000F6 00                              	DB	0
   262 000000F7 00                              	DB	0
   263 000000F8 00                              	DB	0
   264 000000F9 00                              	DB	0
   265 000000FA 00                              	DB	0
   266 000000FB 00                              	DB	0
   267 000000FC 00                              	DB	0
   268 000000FD 00                              	DB	0
   269 000000FE 00                              	DB	0
   270 000000FF 00                              	DB	0
   271                                          [SECTION .text]
   272 00000000                                 	GLOBAL	_inthandler21
   273 00000000                                 _inthandler21:
   274 00000000 55                              	PUSH	EBP
   275 00000001 89 E5                           	MOV	EBP,ESP
   276 00000003 6A 61                           	PUSH	97
   277 00000005 6A 20                           	PUSH	32
   278 00000007 E8 [00000000]                   	CALL	_io_out8
   279 0000000C 6A 60                           	PUSH	96
   280 0000000E E8 [00000000]                   	CALL	_io_in8
   281 00000013 03 05 [00000104]                	ADD	EAX,DWORD [_keydata0]
   282 00000019 50                              	PUSH	EAX
   283 0000001A FF 35 [00000100]                	PUSH	DWORD [_keyfifo]
   284 00000020 E8 [00000000]                   	CALL	_fifo32_put
   285 00000025 C9                              	LEAVE
   286 00000026 C3                              	RET
   287 00000027                                 	GLOBAL	_wait_KBC_sendready
   288 00000027                                 _wait_KBC_sendready:
   289 00000027 55                              	PUSH	EBP
   290 00000028 89 E5                           	MOV	EBP,ESP
   291 0000002A                                 L3:
   292 0000002A 6A 64                           	PUSH	100
   293 0000002C E8 [00000000]                   	CALL	_io_in8
   294 00000031 5A                              	POP	EDX
   295 00000032 83 E0 02                        	AND	EAX,2
   296 00000035 75 F3                           	JNE	L3
   297 00000037 C9                              	LEAVE
   298 00000038 C3                              	RET
   299 00000039                                 	GLOBAL	_init_keyboard
   300 00000039                                 _init_keyboard:
   301 00000039 55                              	PUSH	EBP
   302 0000003A 89 E5                           	MOV	EBP,ESP
   303 0000003C 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
   304 0000003F A3 [00000100]                   	MOV	DWORD [_keyfifo],EAX
   305 00000044 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   306 00000047 A3 [00000104]                   	MOV	DWORD [_keydata0],EAX
   307 0000004C E8 FFFFFFD6                     	CALL	_wait_KBC_sendready
   308 00000051 6A 60                           	PUSH	96
   309 00000053 6A 64                           	PUSH	100
   310 00000055 E8 [00000000]                   	CALL	_io_out8
   311 0000005A E8 FFFFFFC8                     	CALL	_wait_KBC_sendready
   312 0000005F 59                              	POP	ECX
   313 00000060 58                              	POP	EAX
   314 00000061 C7 45 0C 00000047               	MOV	DWORD [12+EBP],71
   315 00000068 C7 45 08 00000060               	MOV	DWORD [8+EBP],96
   316 0000006F C9                              	LEAVE
   317 00000070 E9 [00000000]                   	JMP	_io_out8
   318 00000075                                 	GLOBAL	_keyfifo
   319                                          [SECTION .data]
   320 00000100                                 	ALIGNB	4
   321 00000100                                 _keyfifo:
   322 00000100 00 00 00 00                     	RESB	4
   323 00000104                                 	GLOBAL	_keydata0
   324                                          [SECTION .data]
   325 00000104                                 	ALIGNB	4
   326 00000104                                 _keydata0:
   327 00000104 00 00 00 00                     	RESB	4
